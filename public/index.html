<html>

<head>
    <title>Crescendo</title>
</head>

<body>
    <h2>Upload your audio here!</h2>
    
        <input type="file" name="audio" id="audio" />
        <button type="button" id="upload-button" onclick="uploadAudio()">Upload</button>
    
    <script>
        function uploadAudio() {
            var audio = document.getElementById("audio");
            var formData = new FormData();
            formData.append('audio', audio.files[0], audio.files[0].name);
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/upload', true);
            xhr.onload = function () {
                if (xhr.status === 200) {
                    console.log('Your upload is successful..');
                    split();
                } else {
                    console.log('An error occurred during the upload. Try again.');
                }
            };
            // Send the data.
            xhr.send(formData);
        }
        function split(){
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/status?query=split', true);
            xhr.onload = function () {
                if (xhr.status === 200) {
                    console.log(JSON.stringify(xhr.response));
                    // selectTemplate();
                } else {
                    console.log('An error occurred during the split. Try again.');
                }
            };
            xhr.send();
        }
    </script>
</body>

</html>